<style>
    .config-container-${cardWid} {
        font-family: 'MicrosoftYaHei', '微软雅黑';
        width: 326px;
        height: 670px;
        /*border:1px;*/
        /*bordercolor:"#000000";*/
        /*border-style:solid;*/
        padding: 17px;
        /*border: 1px solid;*/
    }

    .title-${cardWid} {
        font-size: 8px;
        color: #999999;
        margin-top: 5px;
    }

    .label-title-${cardWid} {
        font-family: 'MicrosoftYaHei', '微软雅黑';
        font-weight: 400;
        font-style: normal;
        font-size: 14px;
        color: #666666;
        line-height: 14px;
        /*margin-left: 13px;*/
        margin-top: 6px;
    }

    .line-${cardWid} {

        border-bottom: 1px solid #d8dbe0;
    }

    /*单选按钮*/
    .choose-${cardWid} {
        position: relative;
    }

    .choose-${cardWid} .radio-${cardWid} {
        position: relative;
        display: inline-block;
        font-weight: 400;
        color: #0c4757;
        padding-left: 22px;
        cursor: pointer;
        padding-top: 4px;
    }

    .choose-${cardWid} .radio-${cardWid} input {
        position: absolute;
        left: -9999px;
    }

    .choose-${cardWid} .radio-${cardWid} i {
        display: block;
        position: absolute;
        top: 6px;
        left: 0;
        width: 15px;
        height: 15px;
        outline: 0;
        border: 1px solid #e4e4e4;
        background: #ffffff;
        border-radius: 50%;
        transition: border-color .3s;
        -webkit-transition: border-color .3s;
    }

    .choose-${cardWid} .radio-${cardWid} input + i:after {
        position: absolute;
        content: '';
        top: 2px;
        left: 2px;
        width: 9px;
        height: 9px;
        border-radius: 50%;
        background-color: rgba(24, 144, 255, 1);
        opacity: 0;
        transition: opacity .1s;
        -webkit-transition: opacity .1s;
    }

    .choose-${cardWid} .radio-${cardWid} input:checked + i:after {
        opacity: 1;
    }

    .input-span-${cardWid} {
        margin-top: 7px;
        margin-left: 4px;
        top: 19px;
        display: none;
    }
</style>
<div class="config-container-${cardWid}">
    <div class="title-${cardWid}">卡片配置管理</div>
    <form class="form-horizontal">
        <div class="row show-grid line-${cardWid}" style="padding: 10px 5px 10px 5px;">
            <div class="col-md-4">
                <label class="label-title-${cardWid}">卡片高度</label>
            </div>
            <div class="col-md-8">
                <div class="choose-${cardWid}">
                    <label class="radio-${cardWid}">自适应（无最大限制）<input type="radio" id="firstRadio-${cardWid}" name="radio" value="0"><i></i></label>
                    <label class="radio-${cardWid}">自适应（有最大限制）<input type="radio" value="1" name="radio"><i></i></label>
                    <div class="col-sm-10" style="display: flex">
                        <input type="number" min="1" id="input1-${cardWid}" class="form-control" style="width: 95px;display: none"
                               placeholder="请输入" onkeyup="value=value.replace(/[^\d]/g,'')">
                        <span class="input-span-${cardWid}">PX</span>
                    </div>
                    <label class="radio-${cardWid}">固定高度<input type="radio" value="2" name="radio"><i></i></label>
                    <div class="col-sm-10" style="display: flex">
                        <input type="number" min="1" id="input2-${cardWid}" class="form-control" style="width:95px;display: none"
                               placeholder="请输入" onkeyup="value=value.replace(/[^\d]/g,'')">
                        <span class="input-span-${cardWid}">PX</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="row show-grid" style="padding: 10px 5px;
    border-top: 1px solid #d8dbe0;
    position: absolute;
    bottom: 0px;
    width: 310px;">
            <div class="line-${cardWid}" style="width: 100%;">
                <button type="button" class="btn btn-primary btn-lg btn-block configCardBtn-${cardWid}"
                        style="background-color: rgba(24, 144, 255, 1)">保存
                </button>
            </div>
        </div>

    </form>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        console.log("我的收藏配置页面加载成功");
        try {
            var configStr = '${configInfo}';
            if (configStr !== "") {
                console.log("配置："+configStr);
                var config = JSON.parse(configStr);
                $(".radio-${cardWid}").each(function (e) {
                    if ($(this).find("input").val() === config.type) {
                        $(this).find("input").attr("checked", "checked");
                        if ($(this).find("input").val() === "0") {
                            $("#input1-${cardWid}").css("display", "none");
                            $("#input1-${cardWid}").next().css("display", "none");
                            $("#input2-${cardWid}").css("display", "none");
                            $("#input2-${cardWid}").next().css("display", "none");
                        }
                        else if ($(this).find("input").val() === "1") {
                            $("#input1-${cardWid}").val(config.value);
                            $("#input1-${cardWid}").css("display", "block");
                            $("#input1-${cardWid}").next().css("display", "block");
                        } else if ($(this).find("input").val() === "2") {
                            $("#input2-${cardWid}").val(config.value);
                            $("#input2-${cardWid}").css("display", "block");
                            $("#input2-${cardWid}").next().css("display", "block");
                        }
                    }

                })
            }else{
                $("#power-${cardWid}").attr("checked", "false");
                $("#firstRadio-${cardWid}").attr("checked", "checked");
            }
        } catch (e) {
            alert("我的收藏配置页面加载失败：" + e);
            console.log("我的收藏配置页面加载失败：" + e);
        }

    });

    $(".radio-${cardWid}").change(function (e) {
        if ($(this).find("input").val() === "0") {
            $("#input1-${cardWid}").css("display", "none");
            $("#input1-${cardWid}").next().css("display", "none");
            $("#input2-${cardWid}").css("display", "none");
            $("#input2-${cardWid}").next().css("display", "none");
        } else if ($(this).find("input").val() === "1") {
            $("#input1-${cardWid}").css("display", "block");
            $("#input1-${cardWid}").next().css("display", "block");
            $("#input2-${cardWid}").css("display", "none");
            $("#input2-${cardWid}").next().css("display", "none");
        } else if ($(this).find("input").val() === "2") {
            $("#input1-${cardWid}").css("display", "none");
            $("#input1-${cardWid}").next().css("display", "none");
            $("#input2-${cardWid}").css("display", "block");
            $("#input2-${cardWid}").next().css("display", "block");
        }
    });

    $(".configCardBtn-${cardWid}").off('click').on("click", function () {
        var ret=true;
        //拼接配置json
        var config = new Object();
        //默认自适应
        config.type = 0;
        //拼接单选按钮
        $(".radio-${cardWid}").each(function (e) {
            if ($(this).find("input").is(":checked")) {
                if ($(this).find("input").val() === "0") {
                    config.type = "0";
                } else if ($(this).find("input").val() === "1") {
                    config.type = "1";
                    config.value = $("#input1-${cardWid}").val();
                    if($("#input1-${cardWid}").val()===""){
                        ret=false;
                    }
                } else if ($(this).find("input").val() === "2") {
                    config.type = "2";
                    config.value = $("#input2-${cardWid}").val();
                    if($("#input2-${cardWid}").val()===""){
                        ret=false;
                    }
                }
            }
        })
        if(!ret){
            alert("请输入正确的高度px！");
            return;
        }
        var configStr = JSON.stringify(config);
        console.log("配置：" + configStr);
        configCardCallBack("${cardId}", "${cardWid}", configStr);
    });
</script>